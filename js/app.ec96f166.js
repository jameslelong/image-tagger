(function(e){function t(t){for(var a,o,c=t[0],r=t[1],l=t[2],h=0,d=[];h<c.length;h++)o=c[h],Object.prototype.hasOwnProperty.call(s,o)&&s[o]&&d.push(s[o][0]),s[o]=0;for(a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a]);u&&u(t);while(d.length)d.shift()();return n.push.apply(n,l||[]),i()}function i(){for(var e,t=0;t<n.length;t++){for(var i=n[t],a=!0,c=1;c<i.length;c++){var r=i[c];0!==s[r]&&(a=!1)}a&&(n.splice(t--,1),e=o(o.s=i[0]))}return e}var a={},s={app:0},n=[];function o(t){if(a[t])return a[t].exports;var i=a[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.m=e,o.c=a,o.d=function(e,t,i){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(i,a,function(t){return e[t]}.bind(null,a));return i},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/image-tagger/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],r=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var u=r;n.push([0,"chunk-vendors"]),i()})({0:function(e,t,i){e.exports=i("cd49")},1581:function(e,t,i){},"24ad":function(e,t,i){"use strict";var a=i("869e"),s=i.n(a);s.a},"29e2":function(e,t,i){},"5fe1":function(e,t,i){},"6de2":function(e,t,i){"use strict";var a=i("5fe1"),s=i.n(a);s.a},7885:function(e,t,i){"use strict";var a=i("29e2"),s=i.n(a);s.a},"869e":function(e,t,i){},"935d":function(e,t,i){"use strict";var a=i("e739"),s=i.n(a);s.a},cd49:function(e,t,i){"use strict";i.r(t);i("e260"),i("e6cf"),i("cca6"),i("a79d");var a=i("2b0e"),s=(i("f5df1"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("main",{attrs:{id:"container"}},[i("section",{attrs:{id:"home"}},[i("carousel",{attrs:{images:e.images,selectedImage:e.selectedImage},on:{"image-selected":e.selectImage}}),i("div",{attrs:{id:"primary-area"}},[i("div",{attrs:{id:"editor-column"}},[i("editor-canvas",{attrs:{selectedImage:e.selectedImage,selectedTag:e.selectedTag}}),i("image-upload",{on:{"image-uploaded":e.createImage}})],1),i("settings-column",{attrs:{tags:e.tags,selectedTag:e.selectedTag,images:e.images,selectedImage:e.selectedImage},on:{"tag-selected":e.selectTag}})],1)],1),e._m(0)])}),n=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("section",{attrs:{id:"screen-size-alert"}},[i("p",[e._v("This screen size is not supported")])])}],o=(i("7db0"),i("d4ec")),c=i("bee2"),r=i("262e"),l=i("2caf"),u=i("9ab4"),h=i("60a3"),d=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("section",{attrs:{id:"carousel"}},[i("div",{staticClass:"carousel-button-wrap carousel-left"},[i("button",{staticClass:"carousel-button",on:{click:function(t){return e.prev()}}},[i("i",{staticClass:"fas fa-arrow-left fa-xs"})])]),i("div",{attrs:{id:"carousel-main"}},[i("div",{ref:"carousel-main-inner",attrs:{id:"carousel-main-inner"}},e._l(e.images,(function(t){return i("button",{key:t.id,staticClass:"carousel-image-button",class:{selected:e.selectedImage.id===t.id}},[i("img",{attrs:{src:t.encodedImage}}),i("div",{staticClass:"image-select",on:{click:function(i){return e.selectImage(t)}}}),i("div",{staticClass:"image-overlay"},[i("button",{staticClass:"image-delete",on:{click:function(i){return e.deleteImage(t)}}},[i("i",{staticClass:"fas fa-trash fa-xs"})]),i("div",{staticClass:"image-active-tags"},e._l(t.selectionGroup,(function(t){return i("span",{key:t.linkedTag.id,staticClass:"tag-id"},[e._v(e._s(t.linkedTag.id))])})),0)])])})),0)]),i("div",{staticClass:"carousel-button-wrap carousel-right"},[i("button",{staticClass:"carousel-button",on:{click:function(t){return e.next()}}},[i("i",{staticClass:"fas fa-arrow-right fa-xs"})])])])},f=[],g=(i("c740"),i("a434"),i("b0c0"),function e(t){Object(o["a"])(this,e),this.selections=new Array,this.linkedTag=t}),v=function e(t,i,a){Object(o["a"])(this,e),this.selectionGroup=new Array,this.id=t,this.name=i,this.encodedImage=a},m=function(e){Object(r["a"])(i,e);var t=Object(l["a"])(i);function i(){var e;return Object(o["a"])(this,i),e=t.apply(this,arguments),e.imageWidth=340,e.carouselOffset=0,e}return Object(c["a"])(i,[{key:"mounted",value:function(){this.carousel=this.$refs["carousel-main-inner"]}},{key:"selectImage",value:function(e){this.$emit("image-selected",e)}},{key:"deleteImage",value:function(e){if(this.images&&this.selectedImage){var t=this.images.findIndex((function(t){return t.id===e.id}));e.id===this.selectedImage.id&&(this.images.length>1?t>0?this.selectImage(this.images[t-1]):this.selectImage(this.images[t+1]):this.selectImage(new v(-1,"",""))),this.images.splice(t,1)}}},{key:"prev",value:function(){this.carousel&&this.carouselOffset<0&&(this.carouselOffset+=this.imageWidth,this.carousel.style.left="".concat(this.carouselOffset,"px"))}},{key:"next",value:function(){if(this.carousel){var e=this.carousel.parentElement;if(e){var t=this.carousel.clientWidth,i=e.clientWidth;t>i&&i-t<this.carouselOffset&&(this.carouselOffset-=this.imageWidth,this.carousel.style.left="".concat(this.carouselOffset,"px"))}}}}]),i}(h["c"]);Object(u["a"])([Object(h["b"])(Array)],m.prototype,"images",void 0),Object(u["a"])([Object(h["b"])(v)],m.prototype,"selectedImage",void 0),m=Object(u["a"])([h["a"]],m);var y=m,p=y,b=(i("935d"),i("2877")),x=Object(b["a"])(p,d,f,!1,null,null,null),w=x.exports,C=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("section",{attrs:{id:"settings-column"}},[i("div",{attrs:{id:"tag-container"}},[i("div",{attrs:{id:"tag-header"}},[i("h2",{staticClass:"settings-title"},[e._v("Tags")]),i("form",{attrs:{id:"tag-create-form"},on:{submit:function(t){return t.preventDefault(),e.createTag(t)}}},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.tagNameInput,expression:"tagNameInput"}],attrs:{placeholder:"Tag Name"},domProps:{value:e.tagNameInput},on:{input:function(t){t.target.composing||(e.tagNameInput=t.target.value)}}}),e._m(0)])]),i("ul",{staticClass:"tree-list",attrs:{id:"tag-list"}},e._l(e.tags,(function(t){return i("li",{key:t.id,staticClass:"tag-list-item"},[i("div",{staticClass:"tag-list-item-inner",class:{selected:e.selectedTag.id===t.id}},[i("button",{staticClass:"tag-dropdown-button",class:{active:e.isBranchEnabled(t)},on:{click:function(i){return e.toggleBranch(t)}}},[i("i",{staticClass:"fas fa-caret-right fa-xs"})]),i("div",{staticClass:"tag-meta",on:{click:function(i){return e.selectTag(t)}}},[i("span",{staticClass:"tag-id"},[e._v(e._s(t.id))]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"tag.name"}],staticClass:"tag-name",attrs:{type:"text"},domProps:{value:t.name},on:{input:function(i){i.target.composing||e.$set(t,"name",i.target.value)}}})]),i("button",{staticClass:"tree-delete",on:{click:function(i){return e.deleteTag(t)}}},[i("i",{staticClass:"fas fa-trash fa-xs"})])]),i("ul",{staticClass:"selection-list tree-list",class:{active:e.isBranchEnabled(t)}},e._l(e.selectionsOfTag(t),(function(a){return i("li",{key:a.id,staticClass:"selection-list-item",on:{mouseenter:function(t){return e.highlightSelection(a,!0)},mouseleave:function(t){return e.highlightSelection(a,!1)}}},[i("span",{staticClass:"selection-meta"},[e._v(" x: "+e._s(a.a.x)+", y: "+e._s(a.a.y)+" ")]),i("button",{staticClass:"tree-delete",on:{click:function(i){return e.deleteSelection(t,a)}}},[i("i",{staticClass:"fas fa-trash fa-xs"})])])})),0)])})),0)]),i("div",{attrs:{id:"export-container"}},[i("button",{staticClass:"default-button",attrs:{id:"download-button"},on:{click:function(t){return e.download()}}},[i("i",{staticClass:"fas fa-download fa-sm"}),i("span",[e._v("Download")])])])])},O=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("button",{attrs:{type:"submit"}},[i("i",{staticClass:"fas fa-plus fa-xs"})])}],k=(i("4160"),i("caad"),i("c975"),i("2532"),i("159b"),function(){function e(){Object(o["a"])(this,e)}return Object(c["a"])(e,[{key:"output",value:function(e){var t=new Array;e.forEach((function(e){var i={file:e.name,regions:Array()};e.selectionGroup.forEach((function(e){e.selections.forEach((function(t){var a=t.findTopLeft();i.regions.push({rectangle:{x:a.x,y:a.y,h:t.absHeight,w:t.absWidth},object:e.linkedTag.name})}))})),t.push(i)})),this.generateDownload(JSON.stringify(t))}},{key:"generateDownload",value:function(e){var t=document.createElement("a");t.style.display="none",t.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(e)),t.setAttribute("download","output.json"),document.body.appendChild(t),t.click(),t.remove()}}]),e}()),I=function e(t,i){Object(o["a"])(this,e),this.id=t,this.name=i},j=function(e){Object(r["a"])(i,e);var t=Object(l["a"])(i);function i(){var e;return Object(o["a"])(this,i),e=t.apply(this,arguments),e.jsonHandler=new k,e.tagUID=1,e.tagNameInput="",e.activeBranches=new Array,e}return Object(c["a"])(i,[{key:"createTag",value:function(){var e=this;if(this.tagNameInput&&this.tags){if(this.tags.find((function(t){return e.tagNameInput.toLowerCase()===t.name.toLowerCase()})));else{var t=new I(this.tagUID++,this.tagNameInput);this.tags.push(t)}this.tagNameInput=""}}},{key:"selectTag",value:function(e){this.$emit("tag-selected",e)}},{key:"deleteTag",value:function(e){var t;if(this.tags&&this.images){var i=this.tags.findIndex((function(t){return t.id===e.id}));this.tags.splice(i,1),this.images.forEach((function(t){var i=t.selectionGroup.findIndex((function(t){return t.linkedTag.id===e.id}));t.selectionGroup.splice(i,1)})),e.id===(null===(t=this.selectedTag)||void 0===t?void 0:t.id)&&this.$emit("tag-selected",new I(-1,""))}}},{key:"deleteSelection",value:function(e,t){if(this.selectedImage){var i=this.selectedImage.selectionGroup.findIndex((function(t){return t.linkedTag.id===e.id})),a=this.selectedImage.selectionGroup[i];if(a){var s=a.selections.findIndex((function(e){return e.id===t.id}));a.selections.splice(s,1),a.selections.length<1&&this.selectedImage.selectionGroup.splice(i,1)}}}},{key:"toggleBranch",value:function(e){var t=this.activeBranches.indexOf(e.id);t>=0?this.activeBranches.splice(t,1):this.activeBranches.push(e.id)}},{key:"isBranchEnabled",value:function(e){return this.activeBranches.includes(e.id)}},{key:"selectionsOfTag",value:function(e){var t,i=null===(t=this.selectedImage)||void 0===t?void 0:t.selectionGroup.find((function(t){return t.linkedTag.id===e.id}));return null===i||void 0===i?void 0:i.selections}},{key:"highlightSelection",value:function(e,t){e.isHighlighted=t}},{key:"download",value:function(){this.images&&this.jsonHandler.output(this.images)}}]),i}(h["c"]);Object(u["a"])([Object(h["b"])(Array)],j.prototype,"tags",void 0),Object(u["a"])([Object(h["b"])(I)],j.prototype,"selectedTag",void 0),Object(u["a"])([Object(h["b"])(Array)],j.prototype,"images",void 0),Object(u["a"])([Object(h["b"])(v)],j.prototype,"selectedImage",void 0),j=Object(u["a"])([h["a"]],j);var _,T=j,S=T,V=(i("cd5c"),Object(b["a"])(S,C,O,!1,null,null,null)),E=V.exports,P=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("section",{attrs:{id:"editor-canvas"}},[i("div",{attrs:{id:"editor-controls"}},[i("div",{attrs:{id:"zoom-control-group"}},[i("button",{on:{click:function(t){return e.staticZoom(!0)}}},[i("i",{staticClass:"fas fa-plus fa-xs"})]),i("button",{on:{click:function(t){return e.staticZoom(!1)}}},[i("i",{staticClass:"fas fa-minus fa-xs"})])])]),i("canvas",{ref:"editor-canvas"})])},M=[],A=i("b85c"),B=function e(t,i){Object(o["a"])(this,e),this.x=t,this.y=i};(function(e){e[e["a"]=0]="a",e[e["b"]=1]="b",e[e["c"]=2]="c",e[e["d"]=3]="d"})(_||(_={}));var D=function(){function e(t,i){Object(o["a"])(this,e),this.isHighlighted=!1,this.id=t,this._a=this._b=this._c=this._d=i}return Object(c["a"])(e,[{key:"findTopLeft",value:function(){var e=[this.a,this.b,this.c,this.d];return e.sort((function(e,t){return e.x+e.y<t.x+t.y?-1:1})),e[0]}},{key:"genericPointGet",value:function(e){switch(e){case _.a:return this.a;case _.b:return this.b;case _.c:return this.c;case _.d:return this.d}}},{key:"genericPointSet",value:function(e,t){switch(e){case _.a:this.a=t;break;case _.b:this.b=t;break;case _.c:this.c=t;break;case _.d:this.d=t;break}}},{key:"a",get:function(){return this._a},set:function(e){this._a=e,this._b=new B(this.c.x,e.y),this._d=new B(e.x,this.c.y)}},{key:"b",get:function(){return this._b},set:function(e){this._b=e,this._a=new B(this.d.x,e.y),this._c=new B(e.x,this.d.y)}},{key:"c",get:function(){return this._c},set:function(e){this._c=e,this._b=new B(e.x,this.a.y),this._d=new B(this.a.x,e.y)}},{key:"d",get:function(){return this._d},set:function(e){this._d=e,this._a=new B(e.x,this.b.y),this._c=new B(this.b.x,e.y)}},{key:"absHeight",get:function(){return Math.abs(this.a.x-this.c.x)}},{key:"absWidth",get:function(){return Math.abs(this.a.y-this.c.y)}},{key:"relHeight",get:function(){return this.a.x>this.c.x?-this.absHeight:this.absHeight}},{key:"relWidth",get:function(){return this.a.y>this.c.y?-this.absWidth:this.absWidth}}]),e}(),U=function(e){Object(r["a"])(i,e);var t=Object(l["a"])(i);function i(){var e;return Object(o["a"])(this,i),e=t.apply(this,arguments),e.OFFSET_VALUE=10,e.selectionUID=0,e.scale=1,e.imageOffsetValue=new B(0,0),e.activePoints=new Array,e.isMouseDown=!1,e.isPanEnabled=!1,e}return Object(c["a"])(i,[{key:"mounted",value:function(){var e=this;this.editorCanvas=this.$refs["editor-canvas"],this.editorContext=this.editorCanvas.getContext("2d"),this.resizeCanvas(),window.requestAnimationFrame(this.animationStep),this.editorCanvas.addEventListener("mousedown",(function(t){e.isMouseDown=!0,t.preventDefault(),1!==t.buttons?4!==t.buttons||e.enablePan():e.mouseDown(t)})),window.addEventListener("resize",this.resizeCanvas),this.editorCanvas.addEventListener("mouseup",(function(t){e.isMouseDown=!1,e.mouseUp(t),e.disablePan()})),this.editorCanvas.addEventListener("mousemove",(function(t){e.mouseMove(t)})),this.editorCanvas.addEventListener("wheel",(function(t){e.mouseWheel(t)})),this.editorCanvas.addEventListener("beforeunload",(function(t){e.disablePan()})),this.editorCanvas.addEventListener("keydown",(function(t){"Escape"===t.key&&e.endSelection()}))}},{key:"enablePan",value:function(){this.isPanEnabled=!0,this.editorCanvas&&!this.activeSelection&&(this.editorCanvas.style.cursor="move")}},{key:"disablePan",value:function(){this.isPanEnabled=!1,this.editorCanvas&&!this.activeSelection&&(this.editorCanvas.style.cursor="default")}},{key:"onSelectedImageChanged",value:function(e){var t=this;this.editorContext&&(e?(this.canvasImage=new Image,this.canvasImage.src=e.encodedImage,this.canvasImage.onload=function(){t.scaleImage(),t.centreImage()}):this.clearCanvas())}},{key:"mouseWheel",value:function(e){if(this.editorCanvas){e.preventDefault();var t=this.getRelativeMousePos(this.editorCanvas,e),i=this.scale+-.02*e.deltaY,a=this.scale;this.scale=Math.min(Math.max(.125,i),4);var s=new B(t.x-this.imageOffsetValue.x,t.y-this.imageOffsetValue.y),n=new B(s.x/a-s.x/this.scale,s.y/a-s.y/this.scale);this.imageOffsetValue.x-=n.x*this.scale,this.imageOffsetValue.y-=n.y*this.scale}}},{key:"staticZoom",value:function(e){var t=this.scale+=e?.2:-.2;this.scale=Math.min(Math.max(.125,t),4),this.centreImage()}},{key:"mouseDown",value:function(e){var t;if(!this.isPanEnabled&&this.editorContext&&this.editorCanvas&&(null===(t=this.selectedImage)||void 0===t?void 0:t.encodedImage)&&this.selectedTag&&""!==this.selectedTag.name){var i=this.getRelativeMousePos(this.editorCanvas,e),a=new B(Math.round((i.x-this.imageOffsetValue.x)/this.scale),Math.round((i.y-this.imageOffsetValue.y)/this.scale)),s=this.checkSelectionAnchors(a);s&&(this.activeSelection=s.foundSelection,this.activePoints=s.foundPoints),void 0===this.activeSelection&&0===this.activePoints.length&&(this.activeSelection=this.newSelection=new D(this.selectionUID++,a),this.activePoints.push(_.c))}}},{key:"mouseMove",value:function(e){if(this.editorContext&&this.editorCanvas){var t=this.getRelativeMousePos(this.editorCanvas,e);this.previousMousePos||(this.previousMousePos=t);var i=new B(t.x-this.previousMousePos.x,t.y-this.previousMousePos.y);if(this.isPanEnabled&&!this.activeSelection)this.isMouseDown&&(this.imageOffsetValue.x+=i.x,this.imageOffsetValue.y+=i.y);else{var a=new B(Math.round((t.x-this.imageOffsetValue.x)/this.scale),Math.round((t.y-this.imageOffsetValue.y)/this.scale));if(this.activeSelection){var s=new B(Math.round((this.previousMousePos.x-this.imageOffsetValue.x)/this.scale),Math.round((this.previousMousePos.y-this.imageOffsetValue.y)/this.scale)),n=new B(a.x-s.x,a.y-s.y);if(s&&this.activePoints)for(var o=0,c=3;o<=c;o++){var r=this.activeSelection.genericPointGet(o),l=new B(r.x+n.x,r.y+n.y);this.activePoints.includes(o)&&this.activeSelection.genericPointSet(o,l)}}else this.checkSelectionAnchors(a)}this.previousMousePos=t}}},{key:"mouseUp",value:function(e){this.newSelection&&this.activeSelection&&this.createNewSelection(this.newSelection),this.endSelection()}},{key:"endSelection",value:function(){this.activeSelection&&(this.activePoints=new Array),this.previousMousePos=this.activeSelection=this.newSelection=void 0}},{key:"createNewSelection",value:function(e){var t=this;if(this.selectedImage&&this.selectedTag){var i=this.selectedImage.selectionGroup.find((function(e){var i;return e.linkedTag.id===(null===(i=t.selectedTag)||void 0===i?void 0:i.id)}));if(!i){var a=new g(this.selectedTag),s=this.selectedImage.selectionGroup.push(a);i=this.selectedImage.selectionGroup[s-1]}i.selections.push(e)}}},{key:"checkSelectionAnchors",value:function(e){if(this.editorContext&&this.editorCanvas&&this.selectedImage){var t,i,a=new Array,s=Object(A["a"])(this.selectedImage.selectionGroup);try{for(s.s();!(i=s.n()).done;){var n,o=i.value,c=Object(A["a"])(o.selections);try{for(c.s();!(n=c.n()).done;){for(var r=n.value,l=0,u=3;l<=u;l++){var h=r.genericPointGet(l),d=r.genericPointGet((l+1)%4);if(this.isWithin(e,this.offsetVectorByNumber(h,-this.OFFSET_VALUE),this.offsetVectorByNumber(h,this.OFFSET_VALUE))){a.push(l),r.a.x<r.c.x===r.a.y<r.c.y?this.editorCanvas.style.cursor=h.x===d.x?"nesw-resize":"nwse-resize":this.editorCanvas.style.cursor=h.x===d.x?"nwse-resize":"nesw-resize";break}}var f=void 0,g=void 0;if(r.a.x<r.c.x&&r.a.y<r.c.y?(f=this.offsetVectorByNumber(r.a,this.OFFSET_VALUE/2),g=this.offsetVectorByNumber(r.c,-this.OFFSET_VALUE/2)):(f=this.offsetVectorByNumber(r.a,-this.OFFSET_VALUE/2),g=this.offsetVectorByNumber(r.c,this.OFFSET_VALUE/2)),a.length,this.isWithin(e,f,g)&&(a.push(_.a,_.c),this.editorCanvas.style.cursor="move"),a.length>0){t=r;break}}}catch(v){c.e(v)}finally{c.f()}if(t)break}}catch(v){s.e(v)}finally{s.f()}if(a.length>0&&t)return{foundPoints:a,foundSelection:t};this.editorCanvas.style.cursor="crosshair"}}},{key:"isWithin",value:function(e,t,i){var a=e.x<t.x&&e.x>i.x||e.x>t.x&&e.x<i.x,s=e.y<t.y&&e.y>i.y||e.y>t.y&&e.y<i.y;return a&&s}},{key:"offsetVectorByNumber",value:function(e,t){return new B(e.x+t,e.y+t)}},{key:"offsetVectorByVector",value:function(e,t){return new B(e.x+t.x,e.y+t.y)}},{key:"getRelativeMousePos",value:function(e,t){var i=e.getBoundingClientRect(),a=t.clientX-i.left,s=t.clientY-i.top;return new B(a,s)}},{key:"animationStep",value:function(e){if(void 0===this.startTimestamp&&(this.startTimestamp=e),this.editorCanvas&&this.editorContext&&this.selectedImage){this.clearCanvas(),this.drawImage(),this.newSelection&&this.selectedTag&&this.drawRectangle(this.newSelection,this.selectedTag.name);var t,i=Object(A["a"])(this.selectedImage.selectionGroup);try{for(i.s();!(t=i.n()).done;){var a,s=t.value,n=Object(A["a"])(s.selections);try{for(n.s();!(a=n.n()).done;){var o=a.value;this.drawRectangle(o,s.linkedTag.name)}}catch(c){n.e(c)}finally{n.f()}}}catch(c){i.e(c)}finally{i.f()}}window.requestAnimationFrame(this.animationStep)}},{key:"resizeCanvas",value:function(){var e;(null===(e=this.editorCanvas)||void 0===e?void 0:e.parentElement)&&(this.editorCanvas.height=this.editorCanvas.parentElement.clientHeight,this.editorCanvas.width=this.editorCanvas.parentElement.clientWidth)}},{key:"scaleImage",value:function(){this.canvasImage&&this.editorCanvas&&(this.canvasImage.width>this.canvasImage.height?this.scale=this.canvasImage.height>this.editorCanvas.height?this.editorCanvas.height/this.canvasImage.height:1:this.scale=this.canvasImage.width>this.editorCanvas.width?this.editorCanvas.width/this.canvasImage.width:1)}},{key:"centreImage",value:function(){this.canvasImage&&this.editorCanvas&&(this.imageOffsetValue.x=this.editorCanvas.width/2-this.canvasImage.width*this.scale/2,this.imageOffsetValue.y=this.editorCanvas.height/2-this.canvasImage.height*this.scale/2)}},{key:"drawImage",value:function(){this.editorContext&&this.editorCanvas&&this.canvasImage&&this.editorContext.drawImage(this.canvasImage,this.imageOffsetValue.x,this.imageOffsetValue.y,this.canvasImage.width*this.scale,this.canvasImage.height*this.scale)}},{key:"drawRectangle",value:function(e,t){if(this.editorContext&&this.editorCanvas){var i=this.offsetVectorByVector(new B(e.a.x*this.scale,e.a.y*this.scale),this.imageOffsetValue),a=this.offsetVectorByVector(new B(e.b.x*this.scale,e.b.y*this.scale),this.imageOffsetValue),s=this.offsetVectorByVector(new B(e.c.x*this.scale,e.c.y*this.scale),this.imageOffsetValue),n=this.offsetVectorByVector(new B(e.d.x*this.scale,e.d.y*this.scale),this.imageOffsetValue),o=e.isHighlighted?"#0000FF":"#FF0000";this.editorContext.strokeStyle=o,this.editorContext.strokeRect(i.x,i.y,e.relHeight*this.scale,e.relWidth*this.scale),this.editorContext.fillStyle=o,this.editorContext.fillRect(i.x-3,i.y-3,6,6),this.editorContext.fillRect(a.x-3,a.y-3,6,6),this.editorContext.fillRect(s.x-3,s.y-3,6,6),this.editorContext.fillRect(n.x-3,n.y-3,6,6);var c=e.findTopLeft(),r=this.offsetVectorByVector(new B(c.x*this.scale,c.y*this.scale),this.imageOffsetValue);this.editorContext.font="16px roboto",this.editorContext.fillText(t,r.x+5,r.y+19)}}},{key:"clearCanvas",value:function(){this.editorContext&&this.editorCanvas&&this.editorContext.clearRect(0,0,this.editorCanvas.width,this.editorCanvas.height)}}]),i}(h["c"]);Object(u["a"])([Object(h["b"])(v)],U.prototype,"selectedImage",void 0),Object(u["a"])([Object(h["b"])(I)],U.prototype,"selectedTag",void 0),Object(u["a"])([Object(h["d"])("selectedImage")],U.prototype,"onSelectedImageChanged",null),U=Object(u["a"])([h["a"]],U);var N=U,F=N,L=(i("24ad"),Object(b["a"])(F,P,M,!1,null,null,null)),H=L.exports,G=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("section",{attrs:{id:"image-upload"}},[i("div",{ref:"image-upload",class:{highlight:e.isHighlighted},attrs:{id:"image-upload-inner"},on:{dragover:[function(e){e.preventDefault()},function(t){return e.setHighlight(!0)}],dragleave:function(t){return e.setHighlight(!1)},drop:e.onDrop}},[i("form",{attrs:{id:"upload-form"}},[i("label",{staticClass:"default-button",attrs:{id:"upload-label",for:"upload-input"}},[e._v("Upload Images")]),i("input",{attrs:{id:"upload-input",type:"file",multiple:"",accept:"image/*"},on:{change:e.onChange}})]),i("p",{attrs:{id:"secondary-text"}},[e._v("Or drag images here")])])])},R=[],W=(i("ac1f"),i("466d"),function(e){Object(r["a"])(i,e);var t=Object(l["a"])(i);function i(){var e;return Object(o["a"])(this,i),e=t.apply(this,arguments),e.isHighlighted=!1,e}return Object(c["a"])(i,[{key:"setHighlight",value:function(e){this.isHighlighted=e}},{key:"onDrop",value:function(e){var t;e.stopPropagation(),e.preventDefault(),this.setHighlight(!1);var i=null===(t=e.dataTransfer)||void 0===t?void 0:t.files;i&&this.loopUpload(i)}},{key:"onChange",value:function(e){var t,i=null===(t=e.target)||void 0===t?void 0:t.files;i&&this.loopUpload(i)}},{key:"loopUpload",value:function(e){if(e&&e.length>0){var t,i=Object(A["a"])(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;this.createImage(a)}}catch(s){i.e(s)}finally{i.f()}}}},{key:"createImage",value:function(e){var t=this;if(e.type.match("image/jpeg")||e.type.match("image/png")){var i=new FileReader;i.onload=function(i){i.target&&i.target.result&&"string"===typeof i.target.result&&t.$emit("image-uploaded",e.name,i.target.result)},i.readAsDataURL(e)}}}]),i}(h["c"]));W=Object(u["a"])([h["a"]],W);var $=W,z=$,J=(i("6de2"),Object(b["a"])(z,G,R,!1,null,null,null)),Z=J.exports,q=function(e){Object(r["a"])(i,e);var t=Object(l["a"])(i);function i(){var e;return Object(o["a"])(this,i),e=t.apply(this,arguments),e.images=new Array,e.selectedImage=new v(-1,"",""),e.tags=new Array,e.selectedTag=new I(-1,""),e.imageUID=0,e}return Object(c["a"])(i,[{key:"mounted",value:function(){var e=new I(0,"Untitled");this.tags.push(e),this.selectedTag=e}},{key:"createImage",value:function(e,t){if(!this.images.find((function(e){return e.encodedImage===t}))){var i=new v(this.imageUID++,e,t);this.images.push(i),""===this.selectedImage.encodedImage&&this.selectImage(i)}}},{key:"selectTag",value:function(e){this.selectedTag=e}},{key:"selectImage",value:function(e){this.selectedImage=e}}]),i}(h["c"]);q=Object(u["a"])([Object(h["a"])({components:{Carousel:w,SettingsColumn:E,EditorCanvas:H,ImageUpload:Z}})],q);var Y=q,X=Y,K=(i("7885"),Object(b["a"])(X,s,n,!1,null,null,null)),Q=K.exports;a["a"].config.productionTip=!1,new a["a"]({render:function(e){return e(Q)}}).$mount("#app")},cd5c:function(e,t,i){"use strict";var a=i("1581"),s=i.n(a);s.a},e739:function(e,t,i){}});
//# sourceMappingURL=app.ec96f166.js.map